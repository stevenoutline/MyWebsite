(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{1495:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pay",function(){return s(2817)}])},0:function(e,t,s){"use strict";var r,n,c=s(5893),i=s(3382),a=s(8641);(r=n||(n={}))[r.success=0]="success",r[r.info=1]="info",r[r.warning=2]="warning",r[r.error=3]="error";let l=e=>{let{type:t="success",title:s,content:r,children:n}=e;return(0,c.jsxs)(a.xu,{textAlign:"center",py:10,px:6,children:[(()=>{switch(t){case"success":default:return(0,c.jsx)(i.rE,{boxSize:"50px",color:"green.500"});case"info":return(0,c.jsx)(i.sz,{boxSize:"50px",color:"blue.500"});case"warning":return(0,c.jsx)(i.ii,{boxSize:"50px",color:"orange.300"});case"error":return(0,c.jsx)(i.Tw,{boxSize:"20px",color:"white"})}})(),(0,c.jsx)(a.X6,{as:"h2",size:"xl",mt:6,mb:2,children:s}),r&&(0,c.jsx)(a.xv,{my:10,color:"gray.500",children:r}),n]})};t.Z=l},7951:function(e,t,s){"use strict";var r=s(5893),n=s(8641),c=s(1691);let i=e=>{let{title:t,id:s}=e;return(0,r.jsx)(c.Z,{mt:{base:20,md:40},mb:{base:10,md:20},px:{base:3,md:10},children:(0,r.jsx)(n.X6,{as:"h2",id:s,fontSize:"2xl",children:t})})};t.Z=i},2817:function(e,t,s){"use strict";s.r(t);var r=s(5893),n=s(1163),c=s(7294),i=s(8641),a=s(8395),l=s(3887),u=s(2829),o=s(0),x=s(7951),d=s(2962);let h=e=>{let{title:t,content:s}=e;return(0,r.jsxs)(i.HC,{children:[(0,r.jsx)(i.xv,{as:"span",fontWeight:600,children:t}),s]})},f=()=>{let[e,t]=(0,c.useState)(null),[s,f]=(0,c.useState)(""),[j,p]=(0,c.useState)(0),[m,w]=(0,c.useState)(0),[g,b]=(0,c.useState)(""),y=(0,n.useRouter)(),{oid:S}=y.query;(0,c.useContext)(u.V);let _=async()=>{let e=await fetch("http://10.7.1.102:8000/api/order/search?id="+S),s=await e.json();200===s.status?t(s.data):f(s.msg)};(0,c.useEffect)(()=>{S&&_()},[S]),(0,c.useEffect)(()=>{let e=setInterval(async()=>{await _(),p(j+1)},3e3);return()=>clearInterval(e)},[j]),(0,c.useEffect)(()=>{let t=setInterval(async()=>{if(e&&e.time){let t=new Date().getTime(),s=1e3*e.time+36e5;if(t>s){b("-");return}let r=s-t;b("".concat(Math.floor(r%36e5/6e4),"分钟 ").concat(Math.floor(r%6e4/1e3),"秒"))}w(m+1)},1e3);return()=>clearInterval(t)},[m]);let E=()=>{let t=(0,a.ff)("brand.500","white");return e?"未支付"===e.status?(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(l.Ee,{src:"http://10.7.1.102:8000/api/order/qrcode?oid="+S,alt:"支付宝 支付二维码"}),(0,r.jsxs)(i.M5,{mt:10,color:"blue.600",fontSize:"24px",children:["支付有效时间: ",g]})]}):"已支付"===e.status||"已发货"===e.status?(0,r.jsx)(o.Z,{type:"success",title:"支付成功",content:"支付成功，请转到会员中心 ...",children:(0,r.jsx)(i.rU,{href:"/uc/default",color:t,children:"转到会员中心"})}):"已过期"===e.status?(0,r.jsx)(o.Z,{type:"warning",title:"订单已过期",content:"订单已过期，请重新下单 ..."}):(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.PB,{title:"订单支付",description:"Outline VPN 密钥扫码支付"}),(0,r.jsx)(i.X6,{as:"h1",children:"订单扫码支付"}),(0,r.jsx)(x.Z,{title:"订单信息"}),(0,r.jsxs)(i.aV,{spacing:10,px:{base:"30px",md:"150px"},children:[(0,r.jsx)(h,{title:"订单编号：",content:S?Array.isArray(S)?S[0]:S:""}),(0,r.jsx)(h,{title:"日期：",content:e?new Date(1e3*e.time).toLocaleString():""}),(0,r.jsx)(h,{title:"金额：",content:e?"￥".concat(e.amount):""})]}),(0,r.jsx)(x.Z,{title:"支付宝扫码支付"}),(0,r.jsx)(i.M5,{mt:12,children:(0,r.jsx)(E,{})})]})};f.requireAuthed=!0,t.default=f}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1495)}),_N_E=e.O()}]);